<?php /* /includes/hero_preline.php */ ?>
<section class="relative overflow-hidden bg-white">
  <!-- Background Image -->
  <div class="absolute inset-0 top-0 z-0 pointer-events-none">
    <img src="/public/images/hero-section/siding-repair-home-hoosier-cladding.png" 
         alt="Professional siding repair and installation services" 
         class="w-full h-full object-cover opacity-25"
         loading="eager">
    <div class="absolute inset-0 bg-gradient-to-r from-white/70 via-white/60 to-white/50"></div>
  </div>
  <div class="relative z-10 max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-safe pt-16 sm:pt-20 lg:pt-24 pb-safe">
    <div class="flex flex-col gap-4 sm:gap-6">
      <!-- Copy Section -->
      <div class="flex flex-col justify-center text-center lg:text-left">

        <!-- Main Headline -->
        <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold tracking-tight text-gray-900 leading-tight mb-3 sm:mb-6 lg:mb-8">
          <span class="text-blue-600">South Bend's</span><br>
          Premier Siding Experts
        </h1>

        <!-- Rotating Sub-headlines -->
        <div class="mb-3 sm:mb-6 lg:mb-8">
          <div id="hc-rotator"
               class="relative h-12 sm:h-16 lg:h-20 overflow-hidden"
               aria-live="polite"
               aria-atomic="true">
            <span class="sr-only">Local service highlights:</span>

            <!-- Slides: all in DOM, not display:none (use translate/opacity for a11y & SEO) -->
            <div class="hc-rot-slide opacity-100 translate-y-0 text-base sm:text-lg lg:text-xl text-gray-600 leading-relaxed">Indiana's Premier Siding & Exterior Experts — Serving South Bend and Beyond</div>
            <div class="hc-rot-slide opacity-0 translate-y-3 text-base sm:text-lg lg:text-xl text-gray-600 leading-relaxed">South Bend's Trusted Siding Contractors — Indiana's Exterior Specialists</div>
            <div class="hc-rot-slide opacity-0 translate-y-3 text-base sm:text-lg lg:text-xl text-gray-600 leading-relaxed">Energy-Efficient Siding Installation & Repair Across Northern Indiana</div>
            <div class="hc-rot-slide opacity-0 translate-y-3 text-base sm:text-lg lg:text-xl text-gray-600 leading-relaxed">Quality Craftsmanship for Indiana Homes — Free Local Estimates</div>
            <div class="hc-rot-slide opacity-0 translate-y-3 text-base sm:text-lg lg:text-xl text-gray-600 leading-relaxed">Fiber Cement & Vinyl Siding Pros in South Bend, IN</div>
          </div>

        </div>

        <!-- Trust Signals -->
        <div class="flex flex-wrap gap-4 justify-start mb-4 sm:mb-6 lg:mb-8">
          <div class="flex items-center text-sm text-gray-600 bg-white/80 px-3 py-2 rounded-lg">
            <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Free estimates
          </div>
          <div class="flex items-center text-sm text-gray-600 bg-white/80 px-3 py-2 rounded-lg">
            <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Same-day response
          </div>
          <div class="flex items-center text-sm text-gray-600 bg-white/80 px-3 py-2 rounded-lg">
            <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Licensed in Indiana
          </div>
        </div>

      </div>

    </div>
  </div>
</section>

<!-- AI Chat Assistant Hero Section -->
<section class="relative bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-16 sm:py-20 lg:py-24">
  <div class="absolute inset-0 bg-gradient-to-r from-blue-600/5 via-indigo-600/5 to-purple-600/5"></div>
  
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
        <span class="text-blue-600">Home Owner AI</span> for Hoosier Cladding
      </h2>
      <p class="text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto">
        Trained on home siding, repairs, and all homeowner questions localized to South Bend, Indiana and surrounding areas. The expert on home ownership, repair, and maintenance questions in the area, trained on local data.
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="bg-white rounded-3xl shadow-2xl border border-gray-200 overflow-hidden">
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div>
                <h3 class="text-xl font-bold text-white">Hoosier Cladding AI</h3>
                <p class="text-blue-100 text-sm">Local expert for South Bend area homeowners</p>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
              <span class="text-white text-sm font-medium">Online</span>
            </div>
          </div>
        </div>

        <!-- Chat Content -->
        <div class="p-6">
          <!-- Chat Thread -->
          <div id="hc-thread" class="space-y-4 overflow-auto pr-2 min-h-[300px] max-h-[400px] mb-6" aria-live="polite">
            <div class="flex items-start space-x-3">
              <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              </div>
              <div class="bg-gray-50 rounded-2xl rounded-tl-sm p-4 max-w-[80%]">
                <p class="text-gray-700 leading-relaxed">
                  I'm Hoosier Cladding's AI assistant, trained specifically on home siding, repairs, and maintenance for South Bend, Indiana and surrounding areas. I can help with local building codes, weather considerations, and homeowner questions specific to our region. What can I help you with today?
                </p>
              </div>
            </div>
          </div>

          <!-- Input Form -->
          <form id="hc-form" class="flex items-center space-x-3 mb-6">
            <div class="flex-1 relative">
              <input id="hc-input" type="text" class="w-full h-12 px-4 pr-12 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none text-base bg-white shadow-sm" placeholder="Ask about siding, repairs, or home maintenance...">
              <button type="submit" class="absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
              </button>
            </div>
          </form>

          <!-- Suggestion Chips -->
          <div class="flex flex-wrap gap-3 justify-center mb-6">
            <button type="button" data-suggest="What siding materials work best for South Bend Indiana weather conditions?" class="px-6 py-3 rounded-full text-base font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors border border-blue-200">
              Local Siding Options
            </button>
            <button type="button" data-suggest="Should I repair or replace my siding based on South Bend weather damage?" class="px-6 py-3 rounded-full text-base font-medium bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors border border-indigo-200">
              Repair vs Replace
            </button>
            <button type="button" data-suggest="How do I maintain my home's exterior in Indiana's climate?" class="px-6 py-3 rounded-full text-base font-medium bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors border border-purple-200">
              Home Maintenance
            </button>
          </div>

          <!-- Footer Attribution -->
          <div class="text-center pt-4 border-t border-gray-200">
            <p class="text-sm text-gray-500">
              <span class="font-semibold text-blue-700">Hoosier Cladding LLC</span> AI Assistant
            </p>
            <p class="text-xs text-gray-400 mt-1">
              Trained on local South Bend area data and building codes
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Chat widget script (kept minimal; uses /api/chat.php backend) -->
<script>
(function(){
  const elForm   = document.getElementById('hc-form');
  const elInput  = document.getElementById('hc-input');
  const elThread = document.getElementById('hc-thread');
  const endpoint = '/api/chat.php';

  function addBubble(text, who) {
    const wrap = document.createElement('div');
    wrap.className = 'flex items-start gap-3';
    
    if (who === 'you') {
      wrap.innerHTML = `
        <div class="bg-blue-600 rounded-2xl rounded-tr-sm p-3 max-w-[85%] ml-auto">
          <p class="text-sm text-white">${esc(text)}</p>
        </div>
        <div class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
          <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </div>
      `;
    } else {
      wrap.innerHTML = `
        <div class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
          <svg class="w-3 h-3 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <div class="bg-gray-50 rounded-2xl rounded-tl-sm p-3 max-w-[85%]">
          <p class="text-sm text-gray-700">${fmt(text)}</p>
        </div>
      `;
    }
    
    elThread.appendChild(wrap);
    elThread.scrollTop = elThread.scrollHeight;
  }
  function esc(s){return s.replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]));}
  function fmt(s){
    return esc(s)
      .replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>')
      .replace(/(https?:\/\/\S+)/g,'<a class="underline" href="$1" target="_blank" rel="nofollow noopener">$1</a>')
      .replace(/\n/g,'<br/>');
  }

  async function ask(msg){
    addBubble(msg,'you');
    addBubble('Analyzing your home\'s exterior data...','bot');
    try {
      const res = await fetch(endpoint, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({message: msg}) });
      const data = await res.json();
      const last = elThread.lastElementChild; if (last) last.remove();
      addBubble((data && data.reply) ? data.reply : 'Analysis incomplete. Please rephrase your query for optimal results.','bot');
    } catch(e){
      const last = elThread.lastElementChild; if (last) last.remove();
      addBubble('System temporarily unavailable. Please retry your analysis request.','bot');
    }
  }

  elForm.addEventListener('submit', e => {
    e.preventDefault();
    const msg = elInput.value.trim();
    if (!msg) return;
    elInput.value = '';
    ask(msg);
  });

  document.querySelectorAll('[data-suggest]').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      elInput.value = btn.getAttribute('data-suggest');
      elInput.focus();
    });
  });
})();

// Rotating headlines functionality
(function(){
  const root = document.getElementById('hc-rotator');
  if(!root) return;
  const slides = Array.from(root.querySelectorAll('.hc-rot-slide'));
  const btnPrev = root.querySelector('.hc-rot-prev');
  const btnNext = root.querySelector('.hc-rot-next');
  const idxEl   = root.querySelector('.hc-rot-index');
  let i = 0, t;

  function show(n){
    slides.forEach((el, k)=>{
      const active = k === n;
      el.classList.toggle('opacity-100', active);
      el.classList.toggle('translate-y-0', active);
      el.classList.toggle('opacity-0', !active);
      el.classList.toggle('translate-y-3', !active);
      el.setAttribute('aria-hidden', active ? 'false' : 'true');
      el.tabIndex = active ? 0 : -1;
    });
    if (idxEl) idxEl.textContent = `(${n+1}/${slides.length})`;
    i = n;
  }

  function next(){ show((i+1) % slides.length); }
  function prev(){ show((i-1+slides.length) % slides.length); }

  btnNext && btnNext.addEventListener('click', ()=>{ next(); reset(); });
  btnPrev && btnPrev.addEventListener('click', ()=>{ prev(); reset(); });

  let intervalMs = 4000;
  function reset(){ clearInterval(t); t = setInterval(next, intervalMs); }
  show(0); t = setInterval(next, intervalMs);

  // Pause on hover for UX
  root.addEventListener('mouseenter', ()=> clearInterval(t));
  root.addEventListener('mouseleave', reset);
})();
</script>

<style>
/* Lightweight transition classes for rotating headlines */
#hc-rotator .hc-rot-slide {
  position: absolute;
  left: 0; right: 0;
  transition: opacity .45s ease, transform .45s ease;
  will-change: transform, opacity;
}
#hc-rotator .opacity-0 { opacity: 0; }
#hc-rotator .opacity-100 { opacity: 1; }
#hc-rotator .translate-y-0 { transform: translateY(0); }
#hc-rotator .translate-y-3 { transform: translateY(0.5rem); }
</style>

